---
layout: single
title:  "2024-11-19 인턴 활동_2"
---

2024-12-04 [사람 속성 연구] Peta images 추가 - 김승현

1. 목적

2. 데이터 보강

- 1차 데이터 추가

- 2차 데이터 추가
 
3. 데이터셋 구성 전략

4. 데이터셋 조정에 대한 고려사항 

5. 결론
###
1. 목적 

기존의 val.csv와 test.csv에 부족했던 데이터를 보충하기 위해, 외부의 페타(Peta) 데이터셋에서(Papers with Code - PETA Dataset ) 이미지를 사용했습니다. 

먼저, 사진의 배경을 제거하고 사람만을 추출하기 위해, 이전에 사용한 YOLOv7 모델을 활용하여 이미지를 크롭하는 방식으로 처리하였습니다.  

이 과정에서 이미지의 크기 조정(리사이즈)은 진행하지 않았습니다.

추가로 Label.txt 파일에 라벨링된 내용이 포함되어 있어, 해당 파일에 기록된 이름을 참고하여 자동 라벨링을 진행했습니다. 

이후, 부족한 라벨 값에 대해서는 라벨 스튜디오(Label Studio)를 활용하여 추가적인 라벨링 작업을 진행하였습니다.
 
라벨 스튜디오에는 약 1200장의 이미지가 업로드되었으나, 저화질 사진들을 제거한 후 라벨링을 진행한 결과, 최종적으로 약 700장의 데이터만 남게 되었습니다.

###

2. 데이터 보강 

- 1차 데이터 추가 

라벨링한 이미지들을 val.csv와 test.csv에 적절히 분배할 때, 우선적으로 test.csv에 클래스별로 100개 이하인 항목을 채울 수 있도록 데이터를 나누고, val.csv에도 클래스별로 100개 이하인 항목을 채울 수 있도록 결정했습니다.
 
이를 통해 각 데이터셋의 부족했던 항목들을 채우는 것을 목표로 하였습니다.

1차로 데이터를 추가함으로써 100개 이하였던 항목들을 일부 채울 수 있었으나, 여전히 100개 이하인 항목들이 존재하였습니다. 

추가한 데이터가 실제 데이터였기 때문에, 기존 데이터의 부족한 항목에 대한 데이터를 추가하는 데 한계가 있었습니다.
###
- 2차 데이터 추가
 
2차 데이터 분할에서는 1차에 추가되지 않은 데이터들을 활용하여, train.csv와 전체 데이터 비율을 맞추는 것을 목표로 데이터를 나누었습니다. 

이를 통해 전체 데이터셋의 클래스 비율이 균형을 이루도록 조정하였습니다.

기존의 오차에 비해 일부 감소는 있었으나, 추가한 데이터의 수가 많지 않아 오차가 크게 줄어들지는 않았습니다.

###

3. 데이터셋 구성 전략 

기존의 데이터셋에서 데이터가 많은 항목에 대해서는 성능이 잘 나오고 있지만, 부족한 데이터에 대한 추가가 필요한 상황이었습니다. 

이에 대해, 부족한 데이터만 추가하는 것이 옳을지, 아니면 부족한 항목을 채우되 전체 비율 오차를 줄이는 방향으로 데이터를 추가하는 것이 옳을지에 대해 고민이 있었습니다.

따라서, 동일한 train.csv를 사용하여 각각 1차로 데이터를 추가한 val, test셋과 2차로 데이터를 추가한 val, test셋을 사용해 성능을 비교해 보기로 결정했습니다. 

이를 통해 두 가지 데이터 추가 방법에 따른 성능 차이를 분석할 계획입니다.
###
4. 데이터셋 조정에 대한 고려사항 

데이터 추가 방식의 적합성

• 이 데이터 추가 방식이 옳은지에 대한 고민이 있었습니다. 데이터가 부족한 항목만 추가하는 것이 올바른 방법인지, 아니면 전체 비율을 고려하여 다른 방식을 선택해야 하는지에 대한 논의가 필요했습니다.

성능 향상 추구

• 단순히 성능이 더 잘 나오는 방식을 따른다고 해도 되는지에 대한 고민도 있었습니다. 성능을 높이는 방향으로 데이터를 추가하는 것이 반드시 바람직한지에 대한 검토가 필요했습니다.

데이터셋 비율 맞추기

• 기존의 train, val, test 비율을 맞추기 위해 데이터를 추가하는 것보다는, 비율을 맞추기 위해 데이터를 없애는 것이 더 적절한 방법인지에 대한 고민도 있었습니다.

데이터 추가량의 부족

• 기존 데이터셋에 비해 추가된 데이터의 절대적인 양이 부족하다는 문제가 있었습니다. 추가된 데이터가 충분하지 않아 전체적인 성능 개선이나 데이터 균형에 미치는 영향이 제한적일 수 있다는 우려가 있었습니다.
###
5. 결론
   
데이터가 부족한 항목에 대해 트레인셋의 분포를 따를 가능성이 있습니다. 

그러나 이 경우, 성능 평가에서 부족한 항목에 대해서는 예측이 미약하게 이루어질 수 있으며, 이는 정확한 성능을 반영하지 못할 위험이 있습니다. 따라서 트레인셋과 평가셋(발셋, 테스트셋)의 분포를 맞추는 것이 중요하다고 판단됩니다.

기존의 데이터 나누는 방식을 변경하여, test.csv 의 100개 이하인 항목들을 채운 뒤, 남은 데이터는 모두 val.csv 에 포함시켜 학습을 진행합니다.
